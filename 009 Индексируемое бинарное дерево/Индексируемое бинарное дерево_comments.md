



Magikan
Mon, 23 Dec 2019 16:50:49 GMT
 
https://habr.com/post/481372/#comment\_21052028
https://habr.com/post/481372/#comment\_21052028
23.12.2019 16:50:49 Magikan


lrrr11
Mon, 23 Dec 2019 16:57:09 GMT
да и вообще я не верю, что не нашлось ни одной подходящей библиотеки, откуда можно скопипастить код. Классическая задача же.]]>

  

[gcc.gnu.org/onlinedocs/libstdc++/ext/pb\_ds](https://gcc.gnu.org/onlinedocs/libstdc++/ext/pb_ds/)  
 
https://habr.com/post/481372/#comment\_21052052
https://habr.com/post/481372/#comment\_21052052
23.12.2019 16:57:09 lrrr11


Jessy\_James
Mon, 23 Dec 2019 17:52:02 GMT
 Это делалось не под конкретную задачу, а от нечего делать. За последние лет 8 я только один раз стэк писал для работы)]]>
https://habr.com/post/481372/#comment\_21052238
https://habr.com/post/481372/#comment\_21052238
23.12.2019 17:52:02 Jessy\_James


Jessy\_James
Mon, 23 Dec 2019 17:53:56 GMT
 Сократил так, binary в b. Не сильно в терминологию углублялся, исправлю.]]>
https://habr.com/post/481372/#comment\_21052248
https://habr.com/post/481372/#comment\_21052248
23.12.2019 17:53:56 Jessy\_James


tsarevfs
Mon, 23 Dec 2019 18:57:39 GMT
 
https://habr.com/post/481372/#comment\_21052402
https://habr.com/post/481372/#comment\_21052402
23.12.2019 18:57:39 tsarevfs


Bambyrov
Mon, 23 Dec 2019 21:34:07 GMT
что предлагают заглотить «папу».]]>

в элемент разветвленного дерева, которой ближе к корню, элемент большего веса. Увеличивать вес этого элемента и всех родителей-не выход, потому как может оказаться,  

уровню, но главная проблема — это когда данные меняются, и необходимо вставлять   

У Вас это «вес», у меня «уровень». Конечно сейчас я уже пользуюсь схемой без связи по   

[www.cyberforum.ru/ms-access/thread60797-page3.html](http://www.cyberforum.ru/ms-access/thread60797-page3.html)  
 
https://habr.com/post/481372/#comment\_21052844
https://habr.com/post/481372/#comment\_21052844
23.12.2019 21:34:07 Bambyrov


Jessy\_James
Mon, 23 Dec 2019 21:35:36 GMT
Не очень понял, что здесь имеется ввиду. Вставка поддерева?]]>

в элемент разветвленного дерева, которой ближе к корню, элемент большего веса   

 это когда данные меняются, и необходимо вставлять  
https://habr.com/post/481372/#comment\_21052850
https://habr.com/post/481372/#comment\_21052850
23.12.2019 21:35:36 Jessy\_James


mayorovp
Tue, 24 Dec 2019 11:38:21 GMT
 Ни разу не похоже на декартово дерево]]>
https://habr.com/post/481372/#comment\_21055270
https://habr.com/post/481372/#comment\_21055270
24.12.2019 11:38:21 mayorovp


tsarevfs
Tue, 24 Dec 2019 12:00:07 GMT
Идея как раз в том, чтобы хранить вспомогательную величину, которую автор называет «вес», и на ее основе получать порядковый номер элемента. Использовать декартово дерево оказывается удобно для балансировки и поддержания инварианта весов.]]>

[Декартово дерево по неявному ключу](https://e-maxx.ru/algo/treap#7)  
 
https://habr.com/post/481372/#comment\_21055378
https://habr.com/post/481372/#comment\_21055378
24.12.2019 12:00:07 tsarevfs


Jessy\_James
Tue, 24 Dec 2019 12:11:54 GMT
Все умное до меня уже было написано )]]>

  

> Ясно, как теперь быстро вычислять для текущей вершины её неявный ключ. Поскольку во всех операциях мы приходим в какую-либо вершину, спускаясь по дереву, мы можем просто накапливать эту сумму, передавая её функции. Если мы идём в левое поддерево — накапливаемая сумма не меняется, а если идём в правое — увеличивается на cnt(t->l)+1.


  

Красивая формулировка, как раз так вот и сделал.  

 Заметим, что фактически в данном случае ключ для какой-то вершины — это количество вершин, меньших неё.   
https://habr.com/post/481372/#comment\_21055440
https://habr.com/post/481372/#comment\_21055440
24.12.2019 12:11:54 Jessy\_James


oleg-m1973
Tue, 24 Dec 2019 13:30:12 GMT
 
https://habr.com/post/481372/#comment\_21055842
https://habr.com/post/481372/#comment\_21055842
24.12.2019 13:30:12 oleg-m1973


Jessy\_James
Tue, 24 Dec 2019 13:46:32 GMT
 
https://habr.com/post/481372/#comment\_21055984
https://habr.com/post/481372/#comment\_21055984
24.12.2019 13:46:32 Jessy\_James


Jessy\_James
Tue, 24 Dec 2019 16:10:04 GMT
 
https://habr.com/post/481372/#comment\_21056748
https://habr.com/post/481372/#comment\_21056748
24.12.2019 16:10:04 Jessy\_James


Bambyrov
Tue, 24 Dec 2019 16:14:18 GMT
 
https://habr.com/post/481372/#comment\_21056768
https://habr.com/post/481372/#comment\_21056768
24.12.2019 16:14:18 Bambyrov


ov7a
Thu, 26 Dec 2019 13:52:32 GMT
Повторю свой комментарий оттуда — чем ваша идея отличается от дерева порядковой статистики, которое давным-давно описано в Кормене?]]>

<https://habr.com/ru/post/479142/>  

 У меня какое-то дежавю.  
https://habr.com/post/481372/#comment\_21063950
https://habr.com/post/481372/#comment\_21063950
26.12.2019 13:52:32 ov7a


Jessy\_James
Fri, 27 Dec 2019 10:21:02 GMT
]]>

Когда искал как такое реализовать, не нашел подходящей структуры. И это статьи то же не было.

  

* Для всех вершин, которые на одну правее вышеупомянутых, увеличить add на 1

  

От соседнего поста отличается реализацией. У меня нет доп. поля:

 Почитал Кормена. Идея ни чем, но мое дерево не красно-черное.  
https://habr.com/post/481372/#comment\_21067198
https://habr.com/post/481372/#comment\_21067198
27.12.2019 10:21:02 Jessy\_James


ov7a
Fri, 27 Dec 2019 19:54:52 GMT
 Если у вас не сбалансированное ДДП, то тогда и сложности операций у вас будут в худшем случае линейные (в среднем все равно логарифмические). ]]>
https://habr.com/post/481372/#comment\_21070084
https://habr.com/post/481372/#comment\_21070084
27.12.2019 19:54:52 ov7a


Jessy\_James
Fri, 27 Dec 2019 21:59:54 GMT
 Балансирую на вставке.]]>
https://habr.com/post/481372/#comment\_21070440
https://habr.com/post/481372/#comment\_21070440
27.12.2019 21:59:54 Jessy\_James


vladich
Sat, 28 Dec 2019 10:03:39 GMT
 Такая структура хорошо подходит для хранения и обновления рейтингов по какому-либо параметру.]]>
https://habr.com/post/481372/#comment\_21071540
https://habr.com/post/481372/#comment\_21071540
28.12.2019 10:03:39 vladich


ov7a
Sat, 28 Dec 2019 19:36:09 GMT
Кроме того, попробуйте вставить в ваше дерево последовательно числа от 1 до 1000 — если я правильно понял ваш код, то высота в вашем дереве будет в районе 250 вместо ожидаемой 10-20]]>

 При удалении тоже надо балансировать, иначе можно поудалять листья таким образом, что дерево будет иметь линейную высоту.  
https://habr.com/post/481372/#comment\_21073054
https://habr.com/post/481372/#comment\_21073054
28.12.2019 19:36:09 ov7a


Jessy\_James
Sat, 28 Dec 2019 20:45:35 GMT
 Ок, если сервер с виртуалками на работе на НГ не выключили, то гляну.]]>
https://habr.com/post/481372/#comment\_21073210
https://habr.com/post/481372/#comment\_21073210
28.12.2019 20:45:35 Jessy\_James


Jessy\_James
Mon, 30 Dec 2019 18:59:30 GMT
]]>

Я бы поспорил, на счет необходимости. Список мы конечно можем получить таким образом (если заполним дерево и будем только удалять), но при 1-ой же вставке дерево отбалансируется.

> При удалении тоже надо балансировать


 Проверил, балансирует как надо.   
https://habr.com/post/481372/#comment\_21079488
https://habr.com/post/481372/#comment\_21079488
30.12.2019 18:59:30 Jessy\_James


ov7a
Mon, 30 Dec 2019 20:18:48 GMT
]]>

Насчет удаления — не согласен. У вас же после 1 поворота идет выход из цикла, значит при вставке отбалансируется только самый нижний кусочек.

При его последовательной вставке в ваше дерево получится справа высота два, слева — 5. Явно нарушается ваш предполагаемый инвариант про баланс высот. Хотелось бы иметь формальное доказательство, что у вас там действительно логарифмическая высота — не факт, что найденый мой пример делает самый худший дизбаланс, наверняка можно похуже найти.  

<https://ideone.com/recc7a>  

Вот пример: {8, 4, 30, 2, 6, 10, 36, 9, 12,38, 13, 14, 15 };  

 Насчет проверки моего примера — согласен, я ошибся, и думал, что балансируется по весу, а не по высоте на его основе. Меня не покидало ощущение, что что-то не так: вроде у вас похожее с АВЛ-деревом условие (высоты левого и правого деревьев отличаются не более чем на единицу), но при этом у вас только 1 поворот на операцию, а в АВЛ их может быть два.  
https://habr.com/post/481372/#comment\_21079704
https://habr.com/post/481372/#comment\_21079704
30.12.2019 20:18:48 ov7a


Jessy\_James
Mon, 30 Dec 2019 21:41:41 GMT
]]>

Попозже почитаю как в 2-ва поворота на балансировке делать.

  
```
//break;
p = child;
```cpp


  

 получится справа высота два, слева — 5Да. Переделал, на полный проход балансировки после вставки:
https://habr.com/post/481372/#comment\_21079898
https://habr.com/post/481372/#comment\_21079898
30.12.2019 21:41:41 Jessy\_James


NooneAtAll
Sat, 11 Jan 2020 21:05:54 GMT
Везде все тот же log(N). Зачем заново изобретать велосипед?]]>

  

А имея итератор на позиции уже можно применить erase() или extract()  

  

Если нужен доступ по номеру, то «std::map::begin() + k»  

  

Уже есть insert()  

  
 
https://habr.com/post/481372/#comment\_21118188
https://habr.com/post/481372/#comment\_21118188
11.01.2020 21:05:54 NooneAtAll


Jessy\_James
Sat, 11 Jan 2020 21:08:02 GMT
]]>

 std::map::begin() + kТак там нельзя. К it = std::map::begin() можно только применять ++, и пройти по всему map за время O(N)
https://habr.com/post/481372/#comment\_21118198
https://habr.com/post/481372/#comment\_21118198
11.01.2020 21:08:02 Jessy\_James

Хабр
 https://habrastorage.org/webt/ym/el/wk/ymelwk3zy1gawz4nkejl\_-ammtc.png
https://habr.com/ru/

Sat, 14 May 2022 14:39:05 GMT
habr.com
editor@habr.com
ru
 
https://habr.com/ru/post/481372/
Комментарии к публикации «Индексируемое бинарное дерево»

xml version="1.0" encoding="UTF-8"?